name: Test Supabase Connection

on: workflow_dispatch

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
    - name: ğŸ“¥ Descargar cÃ³digo
      uses: actions/checkout@v4
      
    - name: ğŸ Configurar Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.9'
        
    - name: ğŸ“š Instalar supabase
      run: pip install supabase
      
    - name: ğŸ§ª Ejecutar test
      env:
        SUPABASE_URL: ${{ secrets.SUPABASE_URL }}
        SUPABASE_KEY: ${{ secrets.SUPABASE_KEY }}
      run: |
        python -c "
import os
from supabase import create_client

url = '${{ secrets.SUPABASE_URL }}'
key = '${{ secrets.SUPABASE_KEY }}'

print('ğŸ”— URL:', url)
print('ğŸ”‘ Key:', key[:10] + '...' if key else 'Empty')

try:
    supabase = create_client(url, key)
    print('âœ… ConexiÃ³n exitosa!')
    
    # Probar lista de tablas
    response = supabase.table('vendedoras_data').select('*').limit(1).execute()
    print('âœ… Tabla accesible!')
    
except Exception as e:
    print('âŒ Error:', str(e))
"
